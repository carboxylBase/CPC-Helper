# CPC Helper 版本发布操作手册 (SOP)

假设你现在已经完成了代码修改，准备发布 **v1.1.2**。

### 第一步：修改版本号 (Version Bump)

你需要修改两个文件，让代码知道自己已经是新版本了。

1. **修改 `package.json**`:
找到 `"version": "1.1.1"`, 改为 `"1.1.2"`。
2. **修改 `src-tauri/tauri.conf.json**`:
找到 `"version": "1.1.1"`, 改为 `"1.1.2"`。

*(注意：这两个文件的版本号必须保持一致，否则可能会报错)*

### 第二步：提交代码 (Commit & Push)

将修改后的代码（包括版本号的修改）提交到仓库。

```bash
git add .
git commit -m "chore: bump version to v1.1.2"
git push

```

### 第三步：打标签并推送 (Tag & Trigger)

这是**触发自动构建**的关键一步。GitHub Actions 只有检测到 `v` 开头的标签才会开始工作。

```bash
# 1. 给当前代码打上标签
git tag v1.1.2

# 2. 推送标签到远程 (这会立即触发 GitHub Action)
git push origin v1.1.2

```

### 第四步：等待构建 (Wait for CI)

1. 打开你的 GitHub 仓库页面。
2. 点击上方的 **Actions** 标签。
3. 你会看到一个名为 `Release` (或者你的 workflow 名字) 的任务正在运行。
4. **去喝杯咖啡** ☕️。这个过程通常需要 10-15 分钟（因为它要编译 Windows, macOS, Linux 三个平台的包）。
5. 直到任务状态变成绿色的 **Success** ✅。

### 第五步：正式发布 (Publish Release)

构建成功后，GitHub 只是生成了一个“草稿 (Draft)”，你需要手动把它公开。

1. 点击仓库页面的 **Releases** 标签。
2. 你会看到 `v1.1.2`，标记为 **Draft**。
3. 点击右上角的 **Edit** (编辑/铅笔图标)。
4. **填写更新日志**：
* 在文本框里写下这个版本更新了什么（可以参考下面的模板）。


5. **确认文件**：
* 确保附件里有 `.msi`, `.dmg`, `.AppImage` 以及最重要的 `latest.json`。


6. 点击底部的绿色按钮 **Publish release**。3

---

### 🎉 发布完成！接下来会发生什么？

1. **对于新用户**：
他们直接从 GitHub 下载 v1.1.2 安装即可。
2. **对于老用户 (v1.1.1)**：
当他们下次打开 CPC Helper 时：
* 应用会自动去 GitHub 读取 `latest.json`。
* 发现 `v1.1.2` > `v1.1.1`。
* **自动弹窗**：“发现新版本 v1.1.2...”。
* 用户点击“立即更新” -> 自动下载 -> 自动重启 -> **无缝升级到 v1.1.2**。



---

### 附：更新日志模板 (Copy & Paste)

没有的项可以忽略

```markdown
# CPC Helper v1.1.2 更新日志

## ✨ 新特性
- (这里写新增的功能，例如：新增了设置面板...)

## 🐛 修复
- (这里写修复的Bug，例如：修复了偶尔闪退的问题...)

## 🚀 性能优化
- (这里写优化项...)

---
*此版本支持自动更新，旧版本用户重启软件即可收到推送。*

```